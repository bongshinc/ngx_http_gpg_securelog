# Name of the addon (used internally)
ngx_addon_name=ngx_http_gpg_securelog

# Conditional logic depending on build phase
if test -n "$ngx_module_link"; then
    # Define module type and name
    ngx_module_type=HTTP
    ngx_module_name=ngx_http_gpg_securelog

    # Include paths, dependencies, and source files
    ngx_module_incs=
    ngx_module_deps=
    ngx_module_srcs="$ngx_addon_dir/src/ngx_http_gpg_securelog.c"
    ngx_module_libs="-lgpgme"
    ngx_module_order="$ngx_module_name ngx_http_log_module"

    # Load standard module integration logic
    . auto/module
else
    # Add source and library flags for non-linking phase
    HTTP_MODULES="$HTTP_MODULES ngx_http_gpg_securelog"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $ngx_addon_dir/src/ngx_http_gpg_securelog.c"
    CORE_LIBS="$CORE_LIBS -lgpgme"
fi
